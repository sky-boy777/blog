{% extends 'base.html' %}      {# 加载父模板 #}

{% block header %}  {# 头 #}
<style>
    .user_avatar {
        width:40px;
        height:40px;
    }
</style>
<title>留言板</title>
{% endblock header %}

{% block search %}{% endblock search %}  {# 搜索框 #}

{% block content %}  {# 内容 #}
<div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="h2">来都来了</div>
                <form action="" method="post">
                    {% csrf_token %}
                    <input class="form-control" name="content" type="text" placeholder="说点什么">
                    <div class="red">{{ form.content.errors }}{{ msg }}</div>
                    <input placeholder="输入验证码" name="captcha_1" type="text" >
                    <img alt="验证码" src="{{ image_url }}">
                    <input name="captcha_0" value="{{ hashkey }}" type="hidden">
                    <div class="red">{{ form.captcha.errors }}</div>
                    <input class="btn btn-success" type="submit" value="提交">
                </form>
            </div>
        </div>
     <br>
     <br>
     <!--留言列表开始-->
        {% for item in pager.object_list %}
        <div class="row">
            <div class="col-md-8">
                <div class="text-muted">
                    {% if item.user_id == -1 %}
                    <span class="glyphicon glyphicon-user">匿名用户</span>
                    {% elif item.user.is_superuser %}
                    <img src="{{ item.user.avatar.url }}" alt="头像" class="user_avatar">
                    <span>BYC站长</span>
                    {% else %}
                    <img src="{{ item.user.avatar.url }}" alt="头像" class="user_avatar">
                    <span>{{ item.user.username }}</span>
                    {% endif %}
                </div>
                <div class="h4">{{ item.content }}</div>
                <div class="h6 text-muted">
                    <span class="glyphicon glyphicon-time"></span>
                    <span>{{ item.create_time }}</span>
                </div>
            </div>
        </div>
        <hr>
        {% endfor %}
     <!--留言列表结束-->
</div>

<!--分页-->
<div class="text-center">
      <nav aria-label="Page navigation">
        <ul class="pagination">
           {% if pager.has_previous %}     {# 上一页 #}
            <li><a href="{% url 'web_manage_app:leave_a_message' %}?page=1">第1页</a></li>
          <li>
            <a href="{% url 'web_manage_app:leave_a_message' %}?page={{ pager.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">上一页</span>
            </a>
          </li>
          {% endif %}
          <li><a href="javascript:;">{{ pager.number }}/{{ paginator.num_pages }}</a></li>
          {% if pager.has_next %}     {# 下一页 #}
          <li>
            <a href="{% url 'web_manage_app:leave_a_message' %}?page={{ pager.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">下一页</span>
            </a>
          </li>
          {% endif %}
          {# 最后一页 #}
          <li><a href="{% url 'web_manage_app:leave_a_message' %}?page={{ paginator.num_pages }}">共{{ paginator.num_pages }}页</a></li>
        </ul>
      </nav>
</div>
{% endblock content %}