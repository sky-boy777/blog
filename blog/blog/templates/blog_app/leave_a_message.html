{% extends 'blog_app/base.html' %}      {# 加载父模板 #}


{% block header %}  {# 头 #}
<title>留言板</title>
{% endblock header %}


{% block search %}                       {# 搜索框 #}
{% endblock search %}

{% block content %}                     {# 内容 #}
 <div class="container">
        <div class="row">
            <div class="col-md-10">
                <h1>来都来了</h1>
                <form action="" method="post">
                    {% csrf_token %}
                    <input class="form-control" name="content" type="text" placeholder="说点什么">
                    <div class="red">{{ form.content.errors }}{{ msg }}</div>
<!--                    {{ form.captcha }} {# 图形验证码 #}-->
                    <input placeholder="请输入验证码" name="captcha_1" type="text" >
                    <img alt="验证码" src="{{image_url}}">
                    <input name="captcha_0" value="{{hashkey}}" type="hidden">
                    <div class="red">{{ form.captcha.errors }}</div>

                    <input class="btn btn-success" type="submit" value="提交">
                </form>
            </div>
        </div>
     <br>
     <br>
        {% for leave_a_message in pager.object_list %}
        <div class="row">
            <div class="col-md-8">
                <p class="text-muted"><span class="glyphicon glyphicon-user"></span> {{ leave_a_message.username }}:</p>
                <p class="lead">{{ leave_a_message.content }}</p>
                <p class="h6 text-muted"><span class="glyphicon glyphicon-time"></span> <i>{{ leave_a_message.create_time }}</i></p>
            </div>
        </div>
        <hr>
        {% endfor %}
 </div>

<!--分页-->
<div class="page">
      <nav aria-label="Page navigation">
        <ul class="pagination">
           {% if pager.has_previous %}     {# 上一页 #}
            <li><a href="{% url 'blog_app:leave_a_message' %}?page=1">第1页</a></li>
          <li>
            <a href="{% url 'blog_app:leave_a_message' %}?page={{ pager.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">上一页</span>
            </a>
          </li>
          {% endif %}
          <li><a href="javascript:;">{{ pager.number }}/{{ paginator.num_pages }}</a></li>
          {% if pager.has_next %}     {# 下一页 #}
          <li>
            <a href="{% url 'blog_app:leave_a_message' %}?page={{ pager.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">下一页</span>
            </a>
          </li>
          {% endif %}
          {# 最后一页 #}
          <li><a href="{% url 'blog_app:leave_a_message' %}?page={{ paginator.num_pages }}">共{{ paginator.num_pages }}页</a></li>
        </ul>
      </nav>
</div>
{% endblock content %}