{% extends 'blog_app/base.html' %} {# 加载父模板 #}


{% block header %} {# 头 #}
<title>详情页</title>
<style>
	img{ width:100%; }
</style>
{% endblock header %}




{% block search %} {# 搜索框 #}
{% endblock search %}

{% block content %} {# 内容 #}
<div class="container">
	<div class="row">
		<div class="col-md-10">
			{% if blog %}
			<h1>{{ blog.btitle }}</h1>
			<p class="text-muted"><i>{{ blog.btime }}</i> &nbsp;&nbsp;<span class="glyphicon glyphicon-eye-open"></span> {{ blog.bbrowse }}
			</p>
			<hr />
			<p>{{ blog.btext | safe }}</p>
			{% else %}
			<h3>{{ msg }}</h3>
			{% endif %}
		</div>
	</div>

	<!--文章评论开始-->
	<br>
	<hr>
	<br>
	<div class="row">
		<div class="col-md-8">
			<form action="" method="post">
				{% csrf_token %}
				<input class="form-control" name="content" type="text" placeholder="评论">
				<div class="red">{{ msg }}</div>
				<br>
				<input class="btn btn-success" type="submit" value="评论一下">
			</form>
		</div>
	</div>
	<!--显示评论-->
	<br>
	<br>
     {% for comment in pager.object_list %}
	<div class="row">
		<div class="col-md-8">
			<p class="text-muted"><span class="glyphicon glyphicon-user"></span> {{ comment.username }}</p>
			<p class="lead">{{ comment.content }}</p>
			<p class="h6 text-muted"><span class="glyphicon glyphicon-time"></span> <i>{{ comment.create_time }}</i></p>
		</div>
	</div>
	<hr>
	{% endfor %}
	<!--评论结束-->

</div>

<!--分页-->
<div class="page">
	{% if blog %}
      <nav aria-label="Page navigation">
        <ul class="pagination">
           {% if pager.has_previous %}     {# 上一页 #}
            <li><a href="/blog_detail/?page=1&bid={{ blog.bid }}">第1页</a></li>
          <li>
            <a href="/blog_detail/?page={{ pager.previous_page_number }}&bid={{ blog.bid }}" aria-label="Previous">
              <span aria-hidden="true">上一页</span>
            </a>
          </li>
          {% endif %}
          <li><a href="javascript:;">{{ pager.number }}/{{ paginator.num_pages }}</a></li>
          {% if pager.has_next %}     {# 下一页 #}
          <li>
            <a href="/blog_detail/?page={{ pager.next_page_number }}&bid={{ blog.bid }}" aria-label="Next">
              <span aria-hidden="true">下一页</span>
            </a>
          </li>
          {% endif %}
          {# 最后一页 #}
          <li><a href="/blog_detail/?page={{ paginator.num_pages }}&bid={{ blog.bid }}">共{{ paginator.num_pages }}页</a></li>
        </ul>
      </nav>
	{% endif %}
</div>
{% endblock content %}
